
<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'>
<html>
<head>
	<style>
	<!--
	:lang(fr) { color: green; }
	-->
	</style>
	<link rel='alternate' type='text/html' href='../' hreflang='en' lang='en' title='album documentation'>
	<link rel='alternate' type='text/html' href='../it' hreflang='it' lang='it' title='album documentation'>
	<link rel='alternate' type='text/html' href='../de' hreflang='de' lang='de' title='album documentation'>
	<meta http-equiv='Content-Language' content='fr'>
	<link rel='alternate' type='text/html' href='../nl' hreflang='nl' lang='nl' title='album documentation'>


  <title>MarginalHacks album - Modules Plug-in : utilisation, cr√©ation...
 - Documentation</title>

  <link rel='shortcut icon' HREF='/favicon.ico' type='image/x-gif'>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style>
  <!--
  code {color: red;}
  tt {color: #ff6666;}
  A:hover {background-color: yellow;}
  -->
  </style>
  <script language='JavaScript'>
  <!--
  ver4 = (document.layers || document.all) ? 1 : 0;

  if (document.images) {
    ImageArray = new Array (
      'http://DavePics.com/Domains/MarginalHacks.gif',
      'http://DavePics.com/Domains/MarginalHacks_down.gif',
      'http://DavePics.com/Domains/GetDave.gif',
      'http://DavePics.com/Domains/GetDave_down.gif',
      'http://DavePics.com/Domains/Daveola.gif',
      'http://DavePics.com/Domains/Daveola_down.gif',
      'http://DavePics.com/Domains/DaveSource.gif',
      'http://DavePics.com/Domains/DaveSource_down.gif' )

    ImageList = new Array ();
    for (counter in ImageArray) {
      ImageList[counter] = new Image();
      ImageList[counter].src = ImageArray[counter];
    }
  };
  defaultStatus = 'Marginal Hacks'

  //-->
  </script>
</head>

<body bgcolor=white link='#0000FF' alink='#0000FF' vlink='#5000FF' text='#000000'>

<div lang='en'>
<center>
<table border=0 cellspacing=0 cellpadding=0 width=100%>
  <tr> <td rowspan=2>
      <a href='http://MarginalHacks.com/'
         onMouseOver = document.images['MarginalHacks'].src='http://DavePics.com/Domains/MarginalHacks_down.gif'
          onMouseOut = document.images['MarginalHacks'].src='http://DavePics.com/Domains/MarginalHacks.gif'
         onMouseDown = document.images['MarginalHacks'].src='http://DavePics.com/Domains/MarginalHacks_down.gif'
           onMouseUp = document.images['MarginalHacks'].src='http://DavePics.com/Domains/MarginalHacks.gif'>
      <img name=MarginalHacks alt='MarginalHacks.com'
           src='http://DavePics.com/Domains/MarginalHacks.gif'
           width=69 height=60 border=0></a>
      <a href='http://DaveSource.com/'
         onMouseOver = document.images['DaveSource'].src='http://DavePics.com/Domains/DaveSource_down.gif'
          onMouseOut = document.images['DaveSource'].src='http://DavePics.com/Domains/DaveSource.gif'
         onMouseDown = document.images['DaveSource'].src='http://DavePics.com/Domains/DaveSource_down.gif'
           onMouseUp = document.images['DaveSource'].src='http://DavePics.com/Domains/DaveSource.gif'>
      <img name=DaveSource alt='DaveSource.com'
           src='http://DavePics.com/Domains/DaveSource.gif'
           width=69 height=60 border=0></a>
      <a href='http://GetDave.com/'
         onMouseOver = document.images['GetDave'].src='http://DavePics.com/Domains/GetDave_down.gif'
          onMouseOut = document.images['GetDave'].src='http://DavePics.com/Domains/GetDave.gif'
         onMouseDown = document.images['GetDave'].src='http://DavePics.com/Domains/GetDave_down.gif'
           onMouseUp = document.images['GetDave'].src='http://DavePics.com/Domains/GetDave.gif'>
      <img name=GetDave alt='GetDave.com - all the current Dave Pointers.'
           src='http://DavePics.com/Domains/GetDave.gif'
           width=69 height=60 border=0></a>
      <a href='http://Daveola.com/'
         onMouseOver = document.images['Daveola'].src='http://DavePics.com/Domains/Daveola_down.gif'
          onMouseOut = document.images['Daveola'].src='http://DavePics.com/Domains/Daveola.gif'
         onMouseDown = document.images['Daveola'].src='http://DavePics.com/Domains/Daveola_down.gif'
           onMouseUp = document.images['Daveola'].src='http://DavePics.com/Domains/Daveola.gif'>
      <img name=Daveola alt='Daveola.com - My home.'
           src='http://DavePics.com/Domains/Daveola.gif'
           width=69 height=60 border=0></a>
  </td>
  <td bgcolor=#000000 align=right>
  <font size=+2 face='lucida, helvetica' color=#ccccc0>
    A&nbsp;l&nbsp;b&nbsp;u&nbsp;m&nbsp;<br>

    S&nbsp;e&nbsp;v&nbsp;e&nbsp;n&nbsp; &nbsp;-&nbsp;-&nbsp; &nbsp;M&nbsp;o&nbsp;d&nbsp;u&nbsp;l&nbsp;e&nbsp;s&nbsp; &nbsp;P&nbsp;l&nbsp;u&nbsp;g&nbsp;-&nbsp;i&nbsp;n&nbsp; &nbsp;:&nbsp; &nbsp;u&nbsp;t&nbsp;i&nbsp;l&nbsp;i&nbsp;s&nbsp;a&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;,&nbsp; &nbsp;c&nbsp;r&nbsp;√&nbsp;©&nbsp;a&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;.&nbsp;.&nbsp;.&nbsp;
<br>

  </font>
  </td></tr>
	<tr height=16>
		<td height=16 align=right>
			<a href="http://del.icio.us/post?url=http://MarginalHacks.com/Hacks/album/&amp;title=Marginal+Hacks+Photo+Album+Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Del.icio.us"><img src="/Bookmarks/delicious.gif" title="Add 'Marginal Hacks Photo Album Generator' to Del.icio.us" alt="Add 'Marginal Hacks Photo Album Generator' to Del.icio.us" border="0"></a>
			<a href="http://digg.com/software/Marginal_Hacks_Photo_Album_Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Digg 'Marginal Hacks Photo Album Generator'"><img src="/Bookmarks/digg.gif" title="Digg 'Marginal Hacks Photo Album Generator'" alt="Digg 'Marginal Hacks Photo Album Generator'" border="0"></a>
			<a href="http://furl.net/storeIt.jsp?t=Marginal+Hacks+Photo+Album+Generator&amp;u=http://MarginalHacks.com/Hacks/album/" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to FURL"><img src="/Bookmarks/furl.gif" title="Add 'Marginal Hacks Photo Album Generator' to FURL" alt="Add 'Marginal Hacks Photo Album Generator' to FURL" border="0"></a>
			<a href="http://reddit.com/submit?url=http://MarginalHacks.com/Hacks/album/&amp;title=Marginal+Hacks+Photo+Album+Generato" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to reddit"><img src="/Bookmarks/reddit.gif" title="Add 'Marginal Hacks Photo Album Generator' to reddit" alt="Add 'Marginal Hacks Photo Album Generator' to reddit" border="0"></a>
			<a href="http://www.stumbleupon.com/refer.php?url=http://MarginalHacks.com/Hacks/album/&amp;title=Marginal+Hacks+Photo+Album+Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Stumble Upon"><img src="/Bookmarks/stumbleupon.gif" title="Add 'Marginal Hacks Photo Album Generator' to Stumble Upon" alt="Add 'Marginal Hacks Photo Album Generator' to Stumble Upon" border="0"></a>
			<a href="http://www.technorati.com/faves?add=http://MarginalHacks.com/Hacks/album/" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Technorati"><img src="/Bookmarks/technorati.gif" title="Add 'Marginal Hacks Photo Album Generator' to Technorati" alt="Add 'Marginal Hacks Photo Album Generator' to Technorati" border="0"></a>
			<a href="http://myweb2.search.yahoo.com/myresults/bookmarklet?u=http://MarginalHacks.com/Hacks/album/&amp;t=Marginal+Hacks+Photo+Album+Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Yahoo My Web"><img src="/Bookmarks/myweb2.gif" title="Add 'Marginal Hacks Photo Album Generator' to Yahoo My Web" alt="Add 'Marginal Hacks Photo Album Generator' to Yahoo My Web" border="0"></a>
			<a href="http://www.google.com/bookmarks/mark?op=edit&amp;output=popup&amp;bkmk=http://MarginalHacks.com/Hacks/album/&amp;title=Marginal+Hacks+Photo+Album+Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Google Bookmarks"><img src="/Bookmarks/google.gif" title="Add 'Marginal Hacks Photo Album Generator' to Google Bookmarks" alt="Add 'Marginal Hacks Photo Album Generator' to Google Bookmarks" border="0"></a>
			<a href="http://www.squidoo.com/lensmaster/bookmark?http://MarginalHacks.com/Hacks/album/" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Squidoo"><img src="/Bookmarks/squidoo.gif" title="Add 'Marginal Hacks Photo Album Generator' to Squidoo" alt="Add 'Marginal Hacks Photo Album Generator' to Squidoo" border="0"></a>
			<a href="http://www.spurl.net/spurl.php?url=http://MarginalHacks.com/Hacks/album/&amp;title=Marginal+Hacks+Photo+Album+Generator" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Spurl"><img src="/Bookmarks/spurl.gif" title="Add 'Marginal Hacks Photo Album Generator' to Spurl" alt="Add 'Marginal Hacks Photo Album Generator' to Spurl" border="0"></a>
			<a href="http://www.bloglines.com/sub/http://MarginalHacks.com/Hacks/album/" class="social_img" onclick="window.open(this.href, '_blank', 'scrollbars=yes,menubar=no,height=600,width=750,resizable=yes,toolbar=no,location=no,status=no'); return false;" title="Add 'Marginal Hacks Photo Album Generator' to Bloglines"><img src="/Bookmarks/bloglines.gif" title="Add 'Marginal Hacks Photo Album Generator' to Bloglines" alt="Add 'Marginal Hacks Photo Album Generator' to Bloglines" border="0"></a>
 	 </td>
	</tr>
</table>

<a name=top>

<table cellpadding=8 width='100%'> <tr>
  <td valign=top>
    <table>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/'>Home</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Themes.html'>Themes/Examples</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Languages.html'>Languages</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Plugins.html'>Plugins</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/License.html'>License</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Download.html'>Download</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3>Documentation
          <font size='-1'>
<br><span lang='en'>&nbsp;&nbsp; <img src="..//flag.png"> &nbsp;&nbsp;<a href="../">English</a></span>
<br><span lang='it'>&nbsp;&nbsp; <img src="../it/flag.png"> &nbsp;&nbsp;<a href="../it">Italiano</a></span>
<br><span lang='de'>&nbsp;&nbsp; <img src="../de/flag.png"> &nbsp;&nbsp;<a href="../de">Deutsch</a></span>
<br><span lang='fr'>&nbsp;&nbsp; <img src="flag.png"> &nbsp;&nbsp;Fran√ßais</span>
<br><span lang='nl'>&nbsp;&nbsp; <img src="../nl/flag.png"> &nbsp;&nbsp;<a href="../nl">Nederlands</a></span>

          </font>
</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Mailing_List.html'>Mailing List</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/CHANGELOG.html'>CHANGELOG</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href='http://MarginalHacks.com/Hacks/album/Praises.html'>Praises</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
      <tr bgcolor=#BBBBBB><td>
        <h3><a href=/Contact/>Contact</a>&nbsp;&nbsp;</h3>
        <p>
      </td></tr>
    </table>
  </td>
  <td valign=top>



<p><hr><p>
<a href='.'>Table Of Contents</a>
<ol><a href='#Quest-ce_quun_module_pllug-in'><li>Qu'est-ce qu'un module pllug-in ?</a>
 <a href='#Installation_dun_module_plug-in_et_son_support'><li>Installation d'un module plug-in et son support</a>
 <a href='#Chargement___d√©chargement_des_modules_plug-in'><li>Chargement / d√©chargement des modules plug-in</a>
 <a href='#Options_des_modules_plug-in'><li>Options des modules plug-in</a>
 <a href='#Ecrire_des_modules_plug-in'><li>Ecrire des modules plug-in</a>
 <a href='#Traduit_par:'><li>Traduit par:</a>
</ol><p><hr><p>


<pre>

<span lang="fr">
<b><a name='Quest-ce_quun_module_pllug-in'>1:</a>   Qu'est-ce qu'un module pllug-in ?</b>

Les modules plug-in sont des bouts de code qui vous permettent de modifier le
comportement d'album. Ils peuvent √™tre aussi simples que la fa√ßon de cr√©er des
l√©gendes EXIF ou quelque chose d'aussi compliqu√© que cr√©er un album √† partir
d'une base de donn√©es d'images plut√¥t que d'utiliser une hi√©rarchie dans un
syst√®me de fichiers.


<b><a name='Installation_dun_module_plug-in_et_son_support'>2:</a>   Installation d'un module plug-in et son support</b>

Il y a un certain nombre de modules plug-in disponibles avec l'installation
standard d'album. Si vous souhaitez mettre √† jour album avec les modules
plug-in d'une pr√©c√©dente version d'album qui ne dispose pas de modules plug-in
(pr√© v3.10), vous aurez besoin de faire une fois :

<code>% album -configure</code>

Vous n'aurez pas besoin de refaire cette commande lors des futures mises √†
jour d'album.

Cette commande installera les modules plug-in actuels dans un des r√©pertoires
par d√©faut des modules plug-in. album cherchera les modules plug-in dans un
certain nombre d'endroits. Ceux par d√©faut sont :
<tt>
  /etc/album/plugins/
  /usr/share/album/plugins/
  $HOME/.album/plugins/
</tt>
En r√©alit√©, ces r√©pertoires 'plug-in'  sont ceux trouv√©s dans les endroits
sp√©cifi√©s par l'option '--data_path' dont les noms par d√©faut sont :
<tt>
  /etc/album/
  /usr/share/album/
  $HOME/.album/
</tt>
Vous pouvez sp√©cifier un nouveau r√©pertoire avec l'option '--data_path' et
ajouter un r√©pertoire 'plugins' √† ce niveau ou utiliser l'option
'--plugin_path'.

Les modules plug-in se terminent en g√©n√©ral par l'extension ".alp" mais vous
n'avez pas besoin de sp√©cifier cette extension lorsque vous les utilisez. Par
exemple, si vous avez un module install√© ici :

<tt>/etc/album/plugins/utils/mv.alp</tt>

alors vous l'appellerez ainsi :  <tt>utils/mv</tt>


<b><a name='Chargement___d√©chargement_des_modules_plug-in'>3:</a>   Chargement / d√©chargement des modules plug-in</b>

Pour lister tous les modules plug-in actuellement install√©s, taper :

<code>% album -list_plugins</code>

Pour montrer des informations relatives √† des modules sp√©cifiques (en
utilisant 'utils/mv' comme exemple) :

<code>% album -plugin_info utils/mv</code>

Les modules plug-in seront sauv√©s dans le fichier de configuration pour un
album donn√© ainsi vous n'avez pas besoin de les resp√©cifier √† chaque fois, √†
l'exclusion des modules plug-in qui s'ex√©cutent une seule fois comme par
exemple 'utils/mv' ('mv' = 'move' : correspond √† un d√©placement de fichiers
donc ne peut √™tre ex√©cut√©e qu'une seule fois pour un jeu de fichiers donn√©).

Vous pouvez utiliser les options -no_plugin et -clear_plugin pour d√©sactiver
 mes modules plug-in qui ont √©t√© sauv√©s dans le fichier de configuration de
 l'album courant. De la m√™me fa√ßon que <a href="Section_3.html#Options">les
 options standard d'album</a>, -no_plugin d√©sactivera un module plug-in
 sp√©cifique alors que -clear_plugin d√©sactivera l'ensemble des modules
 plug-in. Toutes les options attach√©es √† ces modules seront √©galement
 effac√©es.


<b><a name='Options_des_modules_plug-in'>4:</a>   Options des modules plug-in</b>

Quelques modules plug-in acceptent des options en ligne de commande. Pour
visualiser comment les utiliser, taper :

<code>% album -plugin_usage utils/mv</code>

Cependant, quand vous sp√©cifiez une option pour un module plug-in, vous devez
indiquer √† album √† quel module plug-in l'option correspond. A la place de la
syntaxe utilis√©e pour les options standards d'album :

<code>% album -une_option</code>

vous devez pr√©fixer l'option avec le nom du module plug-in suivi de
deux-points :

<code>% album -un_plugin:une_option</code>

Par exemple, vous pouvez sp√©cifier le nom de l'index cr√©√© par le module
plug-in 'utils/capindex'.

<code>% album -plugin utils/capindex  -utils/capindex:index blah.html</code>

C'est peu pratique. Vous pouvez raccourcir le nom du module plug-in tant qu'il
ne rentre pas en conflit avec un autre module plug-in d√©j√† charg√© et ayant le
m√™me nom :

<code>% album -plugin utils/capindex  -capindex:index blah.html</code>

Evidemment, les autres types d'options (cha√Ænes de caract√®res, nombres et
tableaux) sont accept√©s et utilisent la m√™me convention. Ces options sont
sauvegard√©es dans le fichier de configuration de l'album de la m√™me fa√ßon que
les options standard.

Avertissement : comme mentionn√©, une fois que nous utilisons un module plug-in
sur un album, il est sauvegard√© dans le fichier de configuration. Si vous
voulez ajouter d'autres options √† un album d√©j√† configur√© pour utiliser un
module plug-in, vous devez soit mentionner le module plug-in ou soit utiliser
le nom complet du module quand vous sp√©cifiez les options (autrement, album ne
saura pas √† qui appartient l'option raccourcie).

Par exemple, consid√©rons un module plug-in imaginaire :

<code>% album -plugin un/exemple/vignetteGen Photos/Espagne</code>

Apr√®s √ßa, supposons que nous voulons utiliser la variable bool√©enne "rapide" du
module vignetteGen.
Ceci <b>ne</b> fonctionnera <b>pas</b> :

<code>% album -vignetteGen:rapide Photos/Espagne</code>

Mais l'une de ces solutions fonctionnera :

<code>% album -plugin un/exemple/vignetteGen -vignetteGen:rapide blah.html Photos/Espagne</code>
<code>% album -un/exemple/vignetteGen:rapide Photos/Espagne</code>


<b><a name='Ecrire_des_modules_plug-in'>5:</a>   Ecrire des modules plug-in</b>

Les modules plug-in sont de petits modules √©crits en perl qui s'appellent via
des fonctions particuli√®res ('hooks') du code d'album.

Il y a de telles fonctions pour la plupart des fonctionnalit√©s d'album et le
code du module plug-in peut souvent soit remplacer soit compl√©ter le code
d'album. Davantage de ces fonctions pourraient √™tre rajout√©es dans les futures
versions d'album si besoin.

Vous pouvez afficher la liste de toutes ces fonctions autoris√©es par album :

<code>% album -list_hooks</code>

Et vous pouvez obtenir des informations sp√©cifiques pour chacune de ces
fonctions :

<code>% album -hook_info &lt;hook_name&gt;</code>

Nous pouvons utiliser album pour g√©n√©rer √† notre place un cadre pour nos
modules plug-in :

<code>% album -create_plugin</code>

Pour effectuer cette t√¢che, vous avez besoin de comprendre les fonctions
'hooks' dans album et les options d'album.

Nous pouvons aussi √©crire un module plug-in √† la main. Utiliser comme base de
travail un module plug-in d√©j√† √©crit facilite le travail.

Dans notre module plug-in, nous enregistrons notre fonction 'hook' en appelant
la fonction album::hook(). Pour appeler des fonctions dans le code d'album,
nous utilisons l'espace de nommage <code>album</code>.
Par exemple, pour enregistrer le code pour la fonction 'hook'
<code>clean_name</code>, notre module plug-in appelle :

<code>album::hook($opt,'clean_name',\&my_clean);</code>

Ainsi, quand album appelle la fonction <code>clean_name</code>, il appellera
√©galement la sous-routine appel√©e <code>my_clean</code> de notre module
plug-in (sous-routine que nous devons fournir).

Pour √©crire cette sous-routine <code>my_clean</code>, regardons les
informations de la fonction 'hook' clean_name :
<tt>
  Args: ($opt, 'clean_name',  $name, $iscaption)
  Description: Nettoyer un nom de fichier pour affichage.
    Le nom est soit un nom de fichier soit il provient d'un fichier de l√©gendes.
  Retourne: le nom nettoy√©
</tt>

Les arguments que la sous-routine <code>my_clean</code> re√ßoit sont sp√©cifi√©s
sur la premi√®re ligne. Supposons qu'on veuille convertir tous les noms en
majuscules. Nous devrions utiliser :

<tt>
sub my_clean {
  my ($opt, $hookname, $name, $iscaption) = @_;
  return uc($name);
}
</tt>
Voici une explication sur les arguments :

<b>$opt</b>        Ceci est le descripteur de toutes les options d'album.
	    Nous ne nous en servons pas ici. Vous pourrez en avoir parfois
	    besoin si vous appelez les fonctions internes d'album. Ceci est
	    √©galement valable si l'argument <b>$data</b> est fourni.
<b>$hookname</b>   Dans notre cas, ce sera 'clean_name'. Ceci nous permet
	    d'enregistrer la m√™me sous-routine pour g√©rer diff√©rentes
	    fonctions 'hooks'.
<b>$name</b>       Ceci est le nom que nous allons nettoyer.
<b>$iscaption</b>  Ceci nous indique si le nom provient d'un fichier de
	    l√©gendes.
	    Pour comprendre n'importe quelles options apr√®s la variable
	    <b>$hookname</b>, vous aurez peut-√™tre besoin de jeter un oeil sur
	    le code correspondant dans album.

Dans notre cas, nous avons seulement besoin d'utiliser la variable
<b>$name</b> fournie, nous appelons la routine perl de mise en majuscule et
nous retournons son r√©sultat. Le code est ainsi termin√© mais nous avons besoin
maintenant de cr√©er un environnement pour notre module plug-in.

Des fonctions 'hooks' vous permettent de remplacer le code d'album. Par
exemple, vous pourriez √©crire du code pour un module pllug-in qui g√©n√©re des
vignettes pour les fichiers au format pdf (utiliser l'outil 'convert' est un
desmoyens de le faire). Nous pouvons enregistrer du code pour la fonction
'hook' relative aux vignettes et simplement retourner 'undef' si nous ne
sommes pas en train de regarder un fichier pdf. Mais quand nous voyons un
fichier pdf, nous cr√©ons alors une vignette que nous retournons. Quand album
r√©cup√©rera une vignette, alors il utilisera celle-ci and sautera l'ex√©cution
de son propre code relatif aux vignettes.

Maintenant, terminons d'√©crire notre module plug-in de mise en majuscule. Un
module plug-in doit comporter les √©l√©ments suivants :


<b>1)</b> Fournir une routine de d√©marrage appel√©e 'start_plugin'. Celle-ci
   fera s√ªrement l'enregistrement des fonctions 'hooks' et sp√©cifiera les
   options en ligne de commande pour le module.


<b>2)</b> La routine 'start_plugin' <b>doit</b> retourne la table de hachage
   des informations du module, laquelle table a besoin d'avoir les cl√©s
   suivantes d√©finies :
   <i>author</i>      => Le nom de l'auteur
   <i>href</i>        => Une adresse internet (ou une adresse √©lectronique) de
   l'auteur
   <i>version</i>     => Le num√©ro de version du module plug-in
   <i>description</i> => Un texte de description du module plug-in

<b>3)</b> Terminer le code du module en retournant '1' (similaire √† un module perl).

Voici notre exemple de code plug-in <code>clean_name</code> dans son module
complet :

<hr>
sub start_plugin {
  my ($opt) = @_;

  album::hook($opt,'clean_name',\&my_clean);

  return {
    author => 'David Ljung Madison',
    href => 'http://MarginalHacks.com/',
    version => '1.0',
    description => "Conversion des noms des images en majuscules",
  };
}

sub my_clean {
  return uc($name);
}

1;
<hr>

Finalement, nous avons besoin de le sauvegarder quelque part. Les modules
plug-in √©tant organis√©s dans une hi√©rarchie de r√©pertoires pour modules
plug-in, nous pourrions le sauver dans un r√©pertoire de module comme :

  <tt>captions/formatting/NAME.alp</tt>

En fait, si vous regardez dans <tt>examples/formatting/NAME.alp</tt>, vous
trouverez qu'il y a d√©j√† un module plug-in qui fait essentiellement la m√™me
chose.

Si vous souhaitez que votre module accepte des options en ligne de commande,
utilisez 'add_option'. Ceci <b>doit</b> √™tre r√©alis√© dans le code de la
routine  'start_plugin'. Quelques exemples :
<tt>
  album::add_option(1,"fast",album::OPTION_BOOL, usage=>"Fais le rapidement");
  album::add_option(1,"name", album::OPTION_STR, usage=>"Votre nom");
  album::add_option(1,"colors",album::OPTION_ARR, usage=>"Liste des couleurs");
</tt>
Pour de plus amples informations, regardez le code de la routine 'add_option'
dans album et jetez un oeil dans les autres routines qui l'utilisent (au d√©but
du code d'album et dans les modules plug-in qui utilisent 'add_option').

Pour lire une option qu'un utilisateur pourrait avoir utilis√©, nous utilisons
la fonction option() :
<tt>
  my $fast = album::option($opt, "fast");
</tt>
Si l'utilisateur fournit une mauvaise valeur pour une option, vous pouvez
appeler la fonction usage() :
<tt>
  album::usage("-colors array can only include values [red, green, blue]");
</tt>
Si votre module plug-in a besoin de charger des modules perl qui ne font pas
partie de la distribution standard de Perl, faites-le de fa√ßon
conditionnelle. Pour avoir un example, regardez le module plug-in
plugins/extra/rss.alp.

Le meilleur moyen de savoir comment √©crire des modules plug-in est de regarder
d'autres modules plug-in, si possible en en copiant un r√©alisant une tache
similaire et en travaillant √† partir de √ßa. Des outils de d√©veloppement pour
les modules plug-in pourraient √™tre cr√©er √† l'avenir.

Une fois de plus, album peut vous aider √† cr√©er un environnement pour vos
modules plug-in :

<code>% album -create_plugin</code>

<b><a name='Traduit_par:'>6:</a>   Traduit par:</b>

Jean-Marc [jean-marc.bouche AT 9online.fr]
</span>

</pre>
<p><font size='-1'><li> Created by <a href='http://MarginalHacks.com/Hacks/make_faq/'>make_faq</a> from <a href='http://MarginalHacks.com/'>Marginal Hacks</a></font><p>
    </td>
  </tr>
</table>
</div>

</body>
</html>
	<center>
	<br><br><br>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	&uarr;<p>&uarr;<p>&uarr;<p>&uarr;<p>
	</center>
